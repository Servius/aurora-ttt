local self = {}
CAC.LuaEntryPoint = CAC.MakeConstructor (self, CAC.Serialization.ISerializable)

CAC.SerializerRegistry:RegisterSerializable ("LuaEntryPoint", 2)

function self:ctor ()
	self.Type        = nil
	self.EventName   = nil
	self.Name        = nil
	self.Hash        = nil
end

-- ISerializable
function self:Serialize (outBuffer)
	self:SerializeLuaEntryPoint (outBuffer)
	
	return outBuffer
end

function self:Deserialize (inBuffer)
	self:DeserializeLuaEntryPoint (inBuffer)
	
	return self
end

-- LuaEntryPoint
function self:SerializeLuaEntryPoint (outBuffer)
	outBuffer:UInt8     (self:GetType ())
	if self:IsHook () then
		outBuffer:StringN32 (self:GetEventName ())
	end
	outBuffer:StringN32 (self:GetName ())
	outBuffer:UInt32    (self:GetHash ())
	
	return outBuffer
end

function self:DeserializeLuaEntryPoint (inBuffer)
	self:SetType (inBuffer:UInt8     ())
	if self:IsHook () then
		self:SetEventName (inBuffer:StringN32 ())
	end
	self:SetName (inBuffer:StringN32 ())
	self:SetHash (inBuffer:UInt32    ())
	
	return self
end

function self:Clone (clone)
	clone = clone or self.__ictor ()
	
	clone:Copy (self)
	
	return clone
end

function self:Copy (source)
	self:CopyLuaEntryPoint (source)
	
	return self
end

function self:CloneLuaEntryPoint (clone)
	clone = clone or self.__ictor ()
	
	clone:CopyLuaEntryPoint (self)
	
	return clone
end

function self:CopyLuaEntryPoint (source)
	self:SetType      (source:GetType      ())
	self:SetEventName (source:GetEventName ())
	self:SetName      (source:GetName      ())
	self:SetHash      (source:GetHash      ())
	
	return self
end

function self:GetId ()
	if self:IsNetReceiver () then
		return "NetReceiver." .. self:GetName () .. "." .. string.format ("%08x", self:GetHash ())
	elseif self:IsConsoleCommand () then
		return "ConsoleCommand." .. self:GetName () .. "." .. string.format ("%08x", self:GetHash ())
	elseif self:IsHook () then
		return "Hook." .. self:GetEventName () .. "." .. self:GetName () .. "." .. string.format ("%08x", self:GetHash ())
	end
end

function self:GetType ()
	return self.Type
end

function self:IsNetReceiver ()
	return self.Type == CAC.LuaEntryPointType.NetReceiver
end

function self:IsConsoleCommand ()
	return self.Type == CAC.LuaEntryPointType.ConsoleCommand
end

function self:IsHook ()
	return self.Type == CAC.LuaEntryPointType.Hook
end

function self:GetEventName ()
	return self.EventName
end

function self:GetName ()
	return self.Name
end

function self:GetHash ()
	return self.Hash
end

function self:SetType (type)
	self.Type = type
	return self
end

function self:SetEventName (eventName)
	self.EventName = eventName
	return self
end

function self:SetName (name)
	self.Name = name
	return self
end

function self:SetHash (hash)
	self.Hash = hash
	return self
end
